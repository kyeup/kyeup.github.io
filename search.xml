<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>Oracle跟踪分析数据库启动的各个阶段</title>
      <link href="/2018/06/26/Oracle%E8%B7%9F%E8%B8%AA%E5%88%86%E6%9E%90%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E7%9A%84%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5/"/>
      <url>/2018/06/26/Oracle%E8%B7%9F%E8%B8%AA%E5%88%86%E6%9E%90%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%AF%E5%8A%A8%E7%9A%84%E5%90%84%E4%B8%AA%E9%98%B6%E6%AE%B5/</url>
      <content type="html"><![CDATA[<p>演示如下：</p><h2 id="启动到nomount状态"><a href="#启动到nomount状态" class="headerlink" title="启动到nomount状态"></a>启动到nomount状态</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SYS@kyeupdbfs&gt; startup nomount;</span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 1720328192 bytes</span><br><span class="line">Fixed Size    2253944 bytes</span><br><span class="line">Variable Size  754977672 bytes</span><br><span class="line">Database Buffers  956301312 bytes</span><br><span class="line">Redo Buffers    6795264 bytes</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="设置trace"><a href="#设置trace" class="headerlink" title="设置trace"></a>设置trace</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SYS@kyeupdbfs&gt; oradebug setmypid;</span><br><span class="line">Statement processed.</span><br><span class="line">SYS@kyeupdbfs&gt; oradebug tracefile_name;</span><br><span class="line">/oracle/app/oracle/diag/rdbms/kyeupdbfs/kyeupdbfs/trace/kyeupdbfs_ora_13343.trc</span><br><span class="line">SYS@kyeupdbfs&gt; alter session set events &apos;10046 trace name context forever,level 12&apos;;</span><br><span class="line"></span><br><span class="line">Session altered.</span><br></pre></td></tr></table></figure><h2 id="启动数据库到mount状态并打开"><a href="#启动数据库到mount状态并打开" class="headerlink" title="启动数据库到mount状态并打开"></a>启动数据库到mount状态并打开</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SYS@kyeupdbfs&gt; alter database mount;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line">SYS@kyeupdbfs&gt; alter database open;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br></pre></td></tr></table></figure><h2 id="查阅trace"><a href="#查阅trace" class="headerlink" title="查阅trace"></a>查阅trace</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">路径：/oracle/app/oracle/diag/rdbms/kyeupdbfs/kyeupdbfs/trace/kyeupdbfs_ora_13343.trc</span><br></pre></td></tr></table></figure><h2 id="查阅trace的另外方法-v-diag-info-视图"><a href="#查阅trace的另外方法-v-diag-info-视图" class="headerlink" title="查阅trace的另外方法 v$diag_info 视图"></a>查阅trace的另外方法 v$diag_info 视图</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SYS@kyeupdbfs&gt; select * from v$diag_info where name like &apos;%Trace%&apos;;</span><br><span class="line"></span><br><span class="line">   INST_ID NAME VALUE</span><br><span class="line">---------- -------------------- --------------------------------------------------</span><br><span class="line"> 1 Diag Trace/oracle/app/oracle/diag/rdbms/kyeupdbfs/kyeupdbfs/</span><br><span class="line">trace</span><br><span class="line"></span><br><span class="line"> 1 Default Trace File/oracle/app/oracle/diag/rdbms/kyeupdbfs/kyeupdbfs/</span><br><span class="line">trace/kyeupdbfs_ora_13343.trc</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> trace </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>oracle数据库DB_NAME、DBID、DB_UNIQUE_NAME等的区别</title>
      <link href="/2018/06/25/oracle%E6%95%B0%E6%8D%AE%E5%BA%93DB_NAME%E3%80%81DBID%E3%80%81DB_UNIQUE_NAME%E7%AD%89%E7%9A%84%E5%8C%BA%E5%88%AB/"/>
      <url>/2018/06/25/oracle%E6%95%B0%E6%8D%AE%E5%BA%93DB_NAME%E3%80%81DBID%E3%80%81DB_UNIQUE_NAME%E7%AD%89%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
      <content type="html"><![CDATA[<h2 id="DB-NAME"><a href="#DB-NAME" class="headerlink" title="DB_NAME"></a>DB_NAME</h2><p>①是数据库名，长度不能超过8个字符，记录在datafile、redolog和control file中 </p><p>②在DataGuard环境中DB_NAME相同而DB_UNIQUE_NAME不同 </p><p>③在RAC环境中，各个节点的DB_NAME 都相同，但是INSTANCE_NAME不同 </p><p>④DB_NAME还在动态注册监听的时候起作用，无论是否定义了SERVICE_NAME,PMON进程都会使用DB_NAME动态注册监听<br><a id="more"></a></p><h2 id="DBID"><a href="#DBID" class="headerlink" title="DBID"></a>DBID</h2><p>①DBID可以看做是DB_NAME在数据库内部的表示，它是在数据库创建的时候用DB_NAME结合算法计算出来的 </p><p>②它存在于datafile和control file中，用来表示数据文件的归属，所以DBID是唯一的，对于不同的数据库，DB_NAME可以是相同的，但是DBID一定是唯一的，例如在DataGuard中，主备库的DB_NAME相同，但是DBID一定不同（看过一个很形象的例子，就是可以有同名的人，但是身份证号码一定不同） </p><h2 id="DB-UNIQUE-NAME："><a href="#DB-UNIQUE-NAME：" class="headerlink" title="DB_UNIQUE_NAME："></a>DB_UNIQUE_NAME：</h2><p>①在DataGuard中，主备库拥有相同的DB_NAME，为了区别，就必须有不同的DB_UNIQUE_NAME </p><p>②DB_UNIQUE_NAME在DG中会影响动态注册的SERVICE_NAME，即如果采用的是动态注册，则注册的SERVICE_NAME为DB_UNIQUE_NAME，但是实例还是INSTANCE_NAME，即SID </p><h2 id="INSTANCE-NAME："><a href="#INSTANCE-NAME：" class="headerlink" title="INSTANCE_NAME："></a>INSTANCE_NAME：</h2><p>①数据库实例的名称，INSTANCE_NAME默认值是SID，一般情况下和数据库名称（DB_NAME)相同，也可不同 </p><p>②initSID.ora 和orapwSID 文件要与INSTANCE_NAME保持一致 </p><p>③INSTANCE_NAME会影响进程的名称 </p><h2 id="SID："><a href="#SID：" class="headerlink" title="SID："></a>SID：</h2><p>①是操作系统中的环境变量，和ORACLE_HOME,ORACLE_BASE用法相同 </p><p>②在操作系统中要想得到实例名，就必须使用ORACLE_SID。且ORACLE_SID必须与INSTANCE_NAME的值一致 </p><h2 id="SERVICE-NAME"><a href="#SERVICE-NAME" class="headerlink" title="SERVICE_NAME"></a>SERVICE_NAME</h2><p>①数据库和客户端相连是使用的服务名 </p><p>②在DataGuard中，如果采用动态注册，建议在主备库使用相同的service_names </p><p>③在DataGuard中，如果采用静态注册，建议在主备库上的listener中输入相同的服务名(service_name) </p><p>④如果采监听采用了静态注册，那么SERVICE_NAME就等于Listener.ora文件中的GLOBAL_DATABASE_NAME的值 </p><h2 id="GLOBAL-DATABASE-NAME："><a href="#GLOBAL-DATABASE-NAME：" class="headerlink" title="GLOBAL_DATABASE_NAME："></a>GLOBAL_DATABASE_NAME：</h2><p>①GLOBAL_DATABASE_NAME 是listener配置的对外网络连接名称，可以是任意值 </p><p>②在客户端配置监听的tnsnames.ora 文件中的service_name与这个GLOBAL_DBNAME 保持一致就可以了 </p><p>③配置静态监听注册时，需要输入SID和GLOBAL_NAME</p><blockquote><p>本文摘自于地址：<a href="http://www.itpux.com/thread-236-1-1.html" target="_blank" rel="noopener">http://www.itpux.com/thread-236-1-1.html</a></p></blockquote>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> base </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>解决debian 9 重启nameserver失效问题</title>
      <link href="/2018/06/23/%E8%A7%A3%E5%86%B3debian%209%20%E9%87%8D%E5%90%AFnameserver%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/"/>
      <url>/2018/06/23/%E8%A7%A3%E5%86%B3debian%209%20%E9%87%8D%E5%90%AFnameserver%E5%A4%B1%E6%95%88%E9%97%AE%E9%A2%98/</url>
      <content type="html"><![CDATA[<h1 id="解决debian-9-重启nameserver失效问题"><a href="#解决debian-9-重启nameserver失效问题" class="headerlink" title="解决debian 9 重启nameserver失效问题"></a>解决debian 9 重启nameserver失效问题</h1><p>刚安装完debian9，用过之后会发现/etc/resolv.conf中配置文件重启后丢失，为了解决此问题需要安装包：<br><a id="more"></a><br>resolfconf</p><h2 id="安装resolvconf"><a href="#安装resolvconf" class="headerlink" title="安装resolvconf"></a>安装resolvconf</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kyeup@Dellpri:~$ sudo apt-get install resolfconf</span><br></pre></td></tr></table></figure><h2 id="编辑文件"><a href="#编辑文件" class="headerlink" title="编辑文件"></a>编辑文件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">kyeup@Dellpri:/etc/resolvconf/resolv.conf.d$ ls -al</span><br><span class="line">总用量 12</span><br><span class="line">drwxr-xr-x 2 root root 4096 6月  23 18:40 .</span><br><span class="line">drwxr-xr-x 5 root root 4096 6月  23 17:58 ..</span><br><span class="line">-rw-r--r-- 1 root root    0 4月   1  2016 base</span><br><span class="line">-rw-r--r-- 1 root root  199 6月  23 18:40 head</span><br><span class="line">lrwxrwxrwx 1 root root   35 6月  23 17:44 original -&gt; /var/run/NetworkManager/resolv.conf</span><br><span class="line">-rw-r--r-- 1 root root    0 6月  23 17:58 tail</span><br><span class="line">kyeup@Dellpri:/etc/resolvconf/resolv.conf.d$ sudo vi head </span><br><span class="line">## 添加内容</span><br><span class="line">nameserver 8.8.8.8</span><br><span class="line">nameserver 114.114.114.114</span><br></pre></td></tr></table></figure><p>除了以上方法以外，还有一种办法，修改网卡配置信息：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">kyeup@Dellpri:~$ sudo vi /etc/network/interfaces</span><br><span class="line">auto lo</span><br><span class="line">iface lo inet loopback</span><br><span class="line">auto enp19s0</span><br><span class="line">iface enp19s0 inet static</span><br><span class="line">    address 192.168.1.253/24</span><br><span class="line">    gateway 192.168.1.1</span><br><span class="line">    dns-nameservers 8.8.8.8</span><br><span class="line">    dns-nameservers 114.114.114.114</span><br><span class="line">~</span><br></pre></td></tr></table></figure></p><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><p>可以重启测试。</p>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debian </tag>
            
            <tag> troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>oracle 控制文件的重建</title>
      <link href="/2018/06/22/%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%E9%87%8D%E5%BB%BA/"/>
      <url>/2018/06/22/%E6%8E%A7%E5%88%B6%E6%96%87%E4%BB%B6%E7%9A%84%E9%87%8D%E5%BB%BA/</url>
      <content type="html"><![CDATA[<blockquote><p>不到最后时刻，如三个控制文件都已损坏，又没有控制文件的备份。还是不要重建控制文件，处理不好就会有数据丢失。</p></blockquote><h2 id="NORESETLOGS"><a href="#NORESETLOGS" class="headerlink" title="NORESETLOGS"></a>NORESETLOGS</h2><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Set #1. NORESETLOGS case</span><br><span class="line">--</span><br><span class="line">-- The following commands will create a new control file and use it</span><br><span class="line">-- to open the database.</span><br><span class="line">-- Data used by Recovery Manager will be lost.</span><br><span class="line">-- Additional logs may be required for media recovery of offline</span><br><span class="line">-- Use this only if the current versions of all online logs are</span><br><span class="line">-- available.</span><br><span class="line">-- After mounting the created controlfile, the following SQL</span><br><span class="line">-- statement will place the database in the appropriate</span><br><span class="line">-- protection mode:</span><br><span class="line">--  ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE</span><br><span class="line">STARTUP NOMOUNT</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; NORESETLOGS  NOARCHIVELOG</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">-- STANDBY LOGFILE</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line">;</span><br><span class="line">-- Commands to re-create incarnation table</span><br><span class="line">-- Below log names MUST be changed to existing filenames on</span><br><span class="line">-- disk. Any one log file from each branch can be used to</span><br><span class="line">-- re-create incarnation records.</span><br><span class="line">-- ALTER DATABASE REGISTER LOGFILE &apos;/oracle/app/oracle/product/11.2.0/dbs/arch1_1_978829161.dbf&apos;;</span><br><span class="line">-- Recovery is required if any of the datafiles are restored backups,</span><br><span class="line">-- or if the last shutdown was not normal or immediate.</span><br><span class="line">RECOVER DATABASE</span><br><span class="line">-- Database can now be opened normally.</span><br><span class="line">ALTER DATABASE OPEN;</span><br><span class="line">-- Files in normal offline tablespaces are now named.</span><br><span class="line">ALTER DATABASE RENAME FILE &apos;MISSING00006&apos;</span><br><span class="line">  TO &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs01.dbf&apos;;</span><br><span class="line">-- Commands to add tempfiles to temporary tablespaces.</span><br><span class="line">-- Online tempfiles have complete space information.</span><br><span class="line">-- Other tempfiles may require adjustment.</span><br><span class="line">ALTER TABLESPACE TEMP ADD TEMPFILE &apos;+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379&apos;</span><br><span class="line">     SIZE 1024M REUSE AUTOEXTEND OFF;</span><br><span class="line">-- End of tempfile additions.</span><br></pre></td></tr></table></figure><p>操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">[BEGIN] 2018/6/22 21:28:55</span><br><span class="line">SQL&gt; shutdown immediate;</span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line">SQL&gt; startup nomount;</span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 3858223104 bytes</span><br><span class="line">Fixed Size    2259080 bytes</span><br><span class="line">Variable Size  788531064 bytes</span><br><span class="line">Database Buffers 3053453312 bytes</span><br><span class="line">Redo Buffers   13979648 bytes</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; NORESETLOGS  NOARCHIVELOG</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line"> 21  ;</span><br><span class="line"></span><br><span class="line">Control file created.</span><br><span class="line"></span><br><span class="line">SQL&gt; recover database;</span><br><span class="line">ORA-00283: recovery session canceled due to errors</span><br><span class="line">ORA-00264: no recovery required</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; alter database open;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from dba_temp_files;</span><br><span class="line"></span><br><span class="line">no rows selected</span><br><span class="line"></span><br><span class="line">ALTER TABLESPACE TEMP ADD TEMPFILE &apos;+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379&apos;</span><br><span class="line">  2       SIZE 1024M REUSE AUTOEXTEND OFF;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from dba_temp_files;</span><br><span class="line"></span><br><span class="line">FILE_NAME</span><br><span class="line">--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------</span><br><span class="line">   FILE_ID TABLESPACE_NAME       BYTES BLOCKS STATUSRELATIVE_FNO AUT   MAXBYTES  MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS</span><br><span class="line">---------- ------------------------------ ---------- ---------- ------- ------------ --- ---------- ---------- ------------ ---------- -----------</span><br><span class="line">+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379</span><br><span class="line"> 1 TEMP   1073741824 131072 ONLINE   1 NO        0  0 1072693248    130944</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[END] 2018/6/22 21:49:09</span><br></pre></td></tr></table></figure></p><h2 id="RESETLOGS"><a href="#RESETLOGS" class="headerlink" title="RESETLOGS"></a>RESETLOGS</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">--     Set #2. RESETLOGS case</span><br><span class="line">--</span><br><span class="line">-- The following commands will create a new control file and use it</span><br><span class="line">-- to open the database.</span><br><span class="line">-- Data used by Recovery Manager will be lost.</span><br><span class="line">-- The contents of online logs will be lost and all backups will</span><br><span class="line">-- be invalidated. Use this only if online logs are damaged.</span><br><span class="line">-- After mounting the created controlfile, the following SQL</span><br><span class="line">-- statement will place the database in the appropriate</span><br><span class="line">-- protection mode:</span><br><span class="line">--  ALTER DATABASE SET STANDBY DATABASE TO MAXIMIZE PERFORMANCE</span><br><span class="line">STARTUP NOMOUNT</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">-- STANDBY LOGFILE</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line">;</span><br><span class="line">-- Commands to re-create incarnation table</span><br><span class="line">-- Below log names MUST be changed to existing filenames on</span><br><span class="line">-- disk. Any one log file from each branch can be used to</span><br><span class="line">-- re-create incarnation records.</span><br><span class="line">-- ALTER DATABASE REGISTER LOGFILE &apos;/oracle/app/oracle/product/11.2.0/dbs/arch1_1_978829161.dbf&apos;;</span><br><span class="line">-- Recovery is required if any of the datafiles are restored backups,</span><br><span class="line">-- or if the last shutdown was not normal or immediate.</span><br><span class="line">RECOVER DATABASE USING BACKUP CONTROLFILE</span><br><span class="line">-- Database can now be opened zeroing the online logs.</span><br><span class="line">ALTER DATABASE OPEN RESETLOGS;</span><br><span class="line">-- Files in normal offline tablespaces are now named.</span><br><span class="line">ALTER DATABASE RENAME FILE &apos;MISSING00006&apos;</span><br><span class="line">  TO &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs01.dbf&apos;;</span><br><span class="line">-- Commands to add tempfiles to temporary tablespaces.</span><br><span class="line">-- Online tempfiles have complete space information.</span><br><span class="line">-- Other tempfiles may require adjustment.</span><br><span class="line">ALTER TABLESPACE TEMP ADD TEMPFILE &apos;+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379&apos;</span><br><span class="line">     SIZE 1024M REUSE AUTOEXTEND OFF;</span><br><span class="line">-- End of tempfile additions.</span><br></pre></td></tr></table></figure><p>操作如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">[BEGIN] 2018/6/22 21:58:29</span><br><span class="line">SQL&gt; exit</span><br><span class="line">Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br><span class="line">[oracle@kyeup01 ~]$ sqlplus &apos;/as sysdba&apos;</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release 11.2.0.4.0 Production on Fri Jun 22 21:58:41 2018</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2013, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br><span class="line"></span><br><span class="line">SQL&gt; archive log list;</span><br><span class="line">Database log mode       No Archive Mode</span><br><span class="line">Automatic archival       Disabled</span><br><span class="line">Archive destination       /oracle/app/oracle/product/11.2.0/dbs/arch</span><br><span class="line">Oldest online log sequence     10</span><br><span class="line">Current log sequence       14</span><br><span class="line">SQL&gt; shutdown immediate;</span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line"> 21  ;</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">*</span><br><span class="line">ERROR at line 1:</span><br><span class="line">ORA-01034: ORACLE not available</span><br><span class="line">Process ID: 75347</span><br><span class="line">Session ID: 386 Serial number: 5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; </span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">SIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line"> 21  ;</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">*</span><br><span class="line">ERROR at line 1:</span><br><span class="line">ORA-01034: ORACLE not available</span><br><span class="line">Process ID: 75347</span><br><span class="line">Session ID: 386 Serial number: 5</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; startup nomount;</span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 3858223104 bytes</span><br><span class="line">Fixed Size    2259080 bytes</span><br><span class="line">Variable Size  788531064 bytes</span><br><span class="line">Database Buffers 3053453312 bytes</span><br><span class="line">Redo Buffers   13979648 bytes</span><br><span class="line">CREATE CONTROLFILE REUSE DATABASE &quot;KYEUPDB&quot; RESETLOGS  NOARCHIVELOG</span><br><span class="line">    MAXLOGFILES 16</span><br><span class="line">0M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line">    MAXLOGMEMBERS 3</span><br><span class="line">    MAXDATAFILES 4096</span><br><span class="line">    MAXINSTANCES 8</span><br><span class="line">    MAXLOGHISTORY 292</span><br><span class="line">LOGFILE</span><br><span class="line">  GROUP 1 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_1.266.978829167&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 2 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_2.267.978829169&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 3 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_3.268.978829173&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 4 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_4.269.978829183&apos;  SIZE 200M BLOCKSIZE 512,</span><br><span class="line">  GROUP 5 &apos;+DGSYSTEM/kyeupdb/onlinelog/group_5.270.978829193&apos;  SIZE 200M BLOCKSIZE 512</span><br><span class="line">DATAFILE</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/system.271.978829205&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/users.275.978829391&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421&apos;,</span><br><span class="line">  &apos;+DGSYSTEM/kyeupdb/datafile/kye_tbs02.dbf&apos;</span><br><span class="line">CHARACTER SET ZHS16GBK</span><br><span class="line"> 21  ;</span><br><span class="line"></span><br><span class="line">Control file created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; ALTER DATABASE OPEN RESETLOGS;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line">ALTER TABLESPACE TEMP ADD TEMPFILE &apos;+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379&apos;</span><br><span class="line">  2       SIZE 1024M REUSE AUTOEXTEND OFF;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from dba_temp_files;</span><br><span class="line"></span><br><span class="line">FILE_NAME</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">   FILE_ID TABLESPACE_NAME       BYTES BLOCKS STATUS</span><br><span class="line">---------- ------------------------------ ---------- ---------- -------</span><br><span class="line">RELATIVE_FNO AUT   MAXBYTES  MAXBLOCKS INCREMENT_BY USER_BYTES USER_BLOCKS</span><br><span class="line">------------ --- ---------- ---------- ------------ ---------- -----------</span><br><span class="line">+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379</span><br><span class="line"> 1 TEMP   1073741824 131072 ONLINE</span><br><span class="line">   1 NO   0     0  0 1072693248    130944</span><br><span class="line">SQL&gt; archive log list;</span><br><span class="line">Database log mode       No Archive Mode</span><br><span class="line">Automatic archival       Disabled</span><br><span class="line">Archive destination       /oracle/app/oracle/product/11.2.0/dbs/arch</span><br><span class="line">Oldest online log sequence     1</span><br><span class="line">Current log sequence       1</span><br><span class="line">SQL&gt; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[END] 2018/6/22 22:10:06</span><br></pre></td></tr></table></figure></p><blockquote><p>如果使用 resetlogs 打开的数据库，就需要对 DB 做一次备份。<br>resetlogs 命令表示一个数据库逻辑生存期的结束和另一个数据库逻辑生存期的开始， 每次使用 resetlogs 命令的时候，SCN 不会被重置，不过 oracle 会重置日志序列号， 而且会重置联机重做日志内容.<br>这样做是为了防止不完全恢复后日志序列会发生冲突（因为现有日志和数据文件间有 了时间差）。<br>在上面RESETLOGS重建控制文件的时候，归档是关闭的，如果是开启的，在开启RESETLOG之前，需要执行RECOVER DATABASE USING BACKUP CONTROLFILE</p></blockquote>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> recovery </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Oracle 表空间的日常维护与管理</title>
      <link href="/2018/06/21/%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E5%88%9B%E5%BB%BA%E6%97%A5%E5%B8%B8%E7%BB%B4%E6%8A%A4%E7%AE%A1%E7%90%86/"/>
      <url>/2018/06/21/%E8%A1%A8%E7%A9%BA%E9%97%B4%E7%9A%84%E5%88%9B%E5%BB%BA%E6%97%A5%E5%B8%B8%E7%BB%B4%E6%8A%A4%E7%AE%A1%E7%90%86/</url>
      <content type="html"><![CDATA[<h2 id="1、创建数据表空间"><a href="#1、创建数据表空间" class="headerlink" title="1、创建数据表空间"></a>1、创建数据表空间</h2><blockquote><p><strong>查询有关表和视图</strong>：【使用版本Oracle 11gR2】<br>1.查看表空间信息<br>dba_tablespaces<br>v$tablespace<br>2.查看数据文件<br>dba_data_files<br>v$datafile<br><a id="more"></a><br>3.查看临时表空间<br>dba_temp_files<br>v$tempfile  </p></blockquote><p><strong>当前的数据文件位置</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; col file_name format a60;</span><br><span class="line">SQL&gt; select file_name from dba_data_files;</span><br><span class="line">FILE_NAME</span><br><span class="line">------------------------------------------------------------</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/system.271.978829205</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/users.275.978829391</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye01.dbf</span><br><span class="line">6 rows selected.</span><br></pre></td></tr></table></figure></p><ul><li>创建单个数据文件的表空间<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select tablespace_name from dba_tablespaces;</span><br><span class="line"></span><br><span class="line">TABLESPACE_NAME</span><br><span class="line">------------------------------</span><br><span class="line">SYSTEM</span><br><span class="line">SYSAUX</span><br><span class="line">UNDOTBS1</span><br><span class="line">TEMP</span><br><span class="line">USERS</span><br><span class="line">TS_EXAMPLE</span><br><span class="line">KYE_TBS01</span><br><span class="line"></span><br><span class="line">7 rows selected.</span><br><span class="line">SQL&gt; create tablespace kye_tbs02 datafile &apos;+DGSYSTEM/kyeupdb/datafile/kye02.dbf&apos; size 2M</span><br><span class="line">  2  autoextend off</span><br><span class="line">  3  segment space management auto;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>autoextend off   —不自动扩展<br>segment space management auto   —自动段管理 推荐</p></blockquote><ul><li><p>创建多个数据文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; CREATE TABLESPACE kye_tbs03 LOGGING DATAFILE</span><br><span class="line"> &apos;+DGSYSTEM/kyeupdb/datafile/kye03_1.dbf&apos; SIZE 2M AUTOEXTEND OFF, </span><br><span class="line"> &apos;+DGSYSTEM/kyeupdb/datafile/kye03_2.dbf&apos; SIZE 2M AUTOEXTEND OFF</span><br><span class="line">  EXTENT MANAGEMENT LOCAL </span><br><span class="line">  SEGMENT SPACE MANAGEMENT AUTO;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br><span class="line"></span><br><span class="line">SQL&gt; create tablespace kye_tbs04 logging datafile</span><br><span class="line">  2  &apos;+DGSYSTEM/kyeupdb/datafile/kye04_1.dbf&apos; size 2M autoextend on next 1M maxsize 20M,</span><br><span class="line">  3  &apos;+DGSYSTEM/kyeupdb/datafile/kye04_2.dbf&apos; size 2M autoextend on next 1M maxsize 20M</span><br><span class="line">  4  extent management local</span><br><span class="line">  5  segment space management auto;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br></pre></td></tr></table></figure></li><li><p>创建大表空间</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create bigfile tablespace kye_bigtbs1 datafile</span><br><span class="line">  2  &apos;+DGSYSTEM/kyeupdb/datafile/kye_bigfile1.dbf&apos; size 1G;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br></pre></td></tr></table></figure></li></ul><h2 id="2、创建临时表空间"><a href="#2、创建临时表空间" class="headerlink" title="2、创建临时表空间"></a>2、创建临时表空间</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create temporary tablespace kye_tmptbs1</span><br><span class="line">  2  tempfile &apos;+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1.dbf&apos;</span><br><span class="line">  3  size 5M autoextend off;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br></pre></td></tr></table></figure><h2 id="3、创建-UNDO-表空间"><a href="#3、创建-UNDO-表空间" class="headerlink" title="3、创建 UNDO 表空间"></a>3、创建 UNDO 表空间</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create undo tablespace kye_undotbs1</span><br><span class="line">  2  datafile &apos;+DGSYSTEM/kyeupdb/datafile/kye_undo1.dbf&apos;</span><br><span class="line">  3  size 10m autoextend off;</span><br><span class="line"></span><br><span class="line">Tablespace created.</span><br></pre></td></tr></table></figure><h2 id="4、表空间的扩展与修改大小"><a href="#4、表空间的扩展与修改大小" class="headerlink" title="4、表空间的扩展与修改大小"></a>4、表空间的扩展与修改大小</h2><ul><li><p>表空间的扩展</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">--- 查看此时创建的表空间</span><br><span class="line"></span><br><span class="line">SQL&gt; col name format a30;</span><br><span class="line">SQL&gt; select * from v$tablespace;</span><br><span class="line"></span><br><span class="line">       TS# NAME   INC BIG FLA ENC</span><br><span class="line">---------- ------------------------------ --- --- --- ---</span><br><span class="line"> 0 SYSTEM  YES NO  YES</span><br><span class="line"> 1 SYSAUX  YES NO  YES</span><br><span class="line"> 2 UNDOTBS1  YES NO  YES</span><br><span class="line"> 3 TEMP   NO  NO  YES</span><br><span class="line"> 4 USERS  YES NO  YES</span><br><span class="line"> 5 TS_EXAMPLE  YES NO  YES</span><br><span class="line"> 7 KYE_TBS01  YES NO  YES</span><br><span class="line"> 8 KYE_TBS02  YES NO  YES</span><br><span class="line"> 9 KYE_TBS03  YES NO  YES</span><br><span class="line">10 KYE_TBS04  YES NO  YES</span><br><span class="line">11 KYE_BIGTBS1  YES YES YES</span><br><span class="line"></span><br><span class="line">       TS# NAME   INC BIG FLA ENC</span><br><span class="line">---------- ------------------------------ --- --- --- ---</span><br><span class="line">12 KYE_TMPTBS1  NO  NO  YES</span><br><span class="line">13 KYE_UNDOTBS1   YES NO  YES</span><br><span class="line"></span><br><span class="line">13 rows selected.</span><br><span class="line">SQL&gt; col file_name format a55;</span><br><span class="line">SQL&gt; select file_name from dba_data_files;</span><br><span class="line"></span><br><span class="line">FILE_NAME</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/system.271.978829205</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/sysaux.272.978829265</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/undotbs1.273.978829323</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/users.275.978829391</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/ts_example.277.978855421</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye01.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye02.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye03_1.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye03_2.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye04_1.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye04_2.dbf</span><br><span class="line"></span><br><span class="line">FILE_NAME</span><br><span class="line">-------------------------------------------------------</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_bigfile1.dbf</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_undo1.dbf</span><br><span class="line"></span><br><span class="line">13 rows selected.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter tablespace kye_tbs01 add datafile &apos;+DGSYSTEM/kyeupdb/datafile/kye01_1.dbf&apos; size 2m autoextend off;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter tablespace kye_tmptbs1 add tempfile &apos;+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1_1.dbf&apos; size 2m autoextend off;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br></pre></td></tr></table></figure></li><li><p>修改大小</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">SQL&gt; col name format a55;</span><br><span class="line">SQL&gt; select name,bytes/1024/1024 from v$tempfile;</span><br><span class="line"></span><br><span class="line">NAMEBYTES/1024/1024</span><br><span class="line">------------------------------------------------------- ---------------</span><br><span class="line">+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379   1024</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1.dbf      5</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1_1.dbf      2</span><br><span class="line"></span><br><span class="line">SQL&gt; alter database tempfile &apos;+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1.dbf&apos; resize 6m;</span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; select name,bytes/1024/1024 from v$tempfile;</span><br><span class="line"></span><br><span class="line">NAMEBYTES/1024/1024</span><br><span class="line">------------------------------------------------------- ---------------</span><br><span class="line">+DGSYSTEM/kyeupdb/tempfile/temp.274.978829379   1024</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1.dbf      6</span><br><span class="line">+DGSYSTEM/kyeupdb/datafile/kye_tmptbs1_1.dbf      2</span><br></pre></td></tr></table></figure></li></ul><h2 id="5、表空间重命名"><a href="#5、表空间重命名" class="headerlink" title="5、表空间重命名"></a>5、表空间重命名</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; alter tablespace kye_bigtbs1 rename to kye_bigtbs;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br></pre></td></tr></table></figure><h2 id="6、表空间的删除"><a href="#6、表空间的删除" class="headerlink" title="6、表空间的删除"></a>6、表空间的删除</h2><blockquote><p>drop tablespace 表空间名字；–直接删除表空间，而不删除对应的数据文件<br>drop tablespace 表空间名字 including contents and datafiles;    –加上该选项 则连同数据文件 一起删除了(<strong>常用</strong>）</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt;  drop tablespace kye_tbs04 including contents and datafiles;</span><br><span class="line"></span><br><span class="line">Tablespace dropped.</span><br><span class="line"></span><br><span class="line">SQL&gt; drop tablespace kye_bigtbs including contents and datafiles cascade constraints;</span><br><span class="line"></span><br><span class="line">Tablespace dropped.</span><br></pre></td></tr></table></figure><h2 id="7、更改表空间的读写模式"><a href="#7、更改表空间的读写模式" class="headerlink" title="7、更改表空间的读写模式"></a>7、更改表空间的读写模式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; alter tablespace kye_tbs03 read only;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter tablespace kye_tbs03 read write;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br></pre></td></tr></table></figure><p>也可以修改表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table kye001 (id int,name varchar2(22));</span><br><span class="line"></span><br><span class="line">Table created.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table kye001 read only;</span><br><span class="line"></span><br><span class="line">Table altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table kye001 read write;</span><br><span class="line"></span><br><span class="line">Table altered.</span><br></pre></td></tr></table></figure></p><h2 id="8、更改表空间的在线模式"><a href="#8、更改表空间的在线模式" class="headerlink" title="8、更改表空间的在线模式"></a>8、更改表空间的在线模式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">alter tablespace kye_tbs01 offline;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br><span class="line"></span><br><span class="line">SQL&gt; alter tablespace kye_tbs01 online;</span><br><span class="line"></span><br><span class="line">Tablespace altered.</span><br></pre></td></tr></table></figure><blockquote><p>在上面的测试中可以看出，直接可以设置表空间离线，但是在下面的操作中可以对数据文件直接设置成离线吗？<br>可以对数据文件进行操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">alter database datafile 9 offline;</span><br><span class="line">alter database datafile &apos;+DGSYSTEM/kyeupdb/datafile/kye03_2.dbf&apos; online;</span><br><span class="line">alter database datafile 9 offline for drop;</span><br></pre></td></tr></table></figure></p></blockquote><blockquote><p>在对数据文件操作的时候会出现错误：<br>除非启用了介质恢复, 否则不允许立即脱机.在NOARCHIVELOG模式，不可以立即离线数据文件。</p></blockquote>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> maintenance </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>DDL、DML、DCL、DQL的理解</title>
      <link href="/2018/06/21/DDL%E3%80%81DML%E3%80%81DCL%20%E7%9A%84%E7%90%86%E8%A7%A3/"/>
      <url>/2018/06/21/DDL%E3%80%81DML%E3%80%81DCL%20%E7%9A%84%E7%90%86%E8%A7%A3/</url>
      <content type="html"><![CDATA[<p><strong>DDL、DML 和 DCL 的理解</strong></p><ul><li>DDL（data definition language）数据库定义语言 的主要语句（操作）</li></ul><p>Create 语句：可以创建数据库和数据库的一些对象。</p><p>Drop 语句：可以删除数据表、索引、触发程序、条件约束以及数据表的权限等。</p><p>Alter 语句：修改数据表定义及属性。<br><a id="more"></a></p><ul><li>DML（data manipulation language）数据操纵语言 的主要语句（操作）</li></ul><p>Insert 语句：向数据表张插入一条记录。</p><p>Delete 语句：删除数据表中的一条或多条记录，也可以删除数据表中的所有记录，但是，它的操 作对象仍是记录。</p><p>Update 语句：用于修改已存在表中的记录的内容。</p><ul><li>DCL（Data Control Language）数据库控制语言 的主要语句（操作）</li></ul><p>Grant 语句：允许对象的创建者给某用户或某组或所有用户（PUBLIC）某些特定的权限。</p><p>Revoke 语句：可以废除某用户或某组或所有用户访问权限</p><ul><li>DQL</li></ul><p>select 查询语句</p>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> 基础知识 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>debian 9 安装AMD驱动</title>
      <link href="/2018/06/20/debian%209%20%E5%AE%89%E8%A3%85AMD%E9%A9%B1%E5%8A%A8/"/>
      <url>/2018/06/20/debian%209%20%E5%AE%89%E8%A3%85AMD%E9%A9%B1%E5%8A%A8/</url>
      <content type="html"><![CDATA[<h1 id="debian-9-安装AMD驱动"><a href="#debian-9-安装AMD驱动" class="headerlink" title="debian 9 安装AMD驱动"></a>debian 9 安装AMD驱动</h1><hr><p>需求说明：</p><ul><li>安装完成debian系统后独显驱动未安装<h2 id="操作系统版本："><a href="#操作系统版本：" class="headerlink" title="操作系统版本："></a>操作系统版本：</h2><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">kyeup@Taishiji:~$ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:Debian</span><br><span class="line">Description:Debian GNU/Linux 9.4 (stretch)</span><br><span class="line">Release:9.4</span><br><span class="line">Codename:stretch</span><br></pre></td></tr></table></figure></li></ul><h2 id="安装驱动之前："><a href="#安装驱动之前：" class="headerlink" title="安装驱动之前："></a>安装驱动之前：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kyeup@Taishiji:~$ sudo lshw -c video</span><br><span class="line">[sudo] password for kyeup: </span><br><span class="line">  *-display UNCLAIMED       </span><br><span class="line">       description: VGA compatible controller</span><br><span class="line">       product: Whistler LE [Radeon HD 6610M/7610M]</span><br><span class="line">       vendor: Advanced Micro Devices, Inc. [AMD/ATI]</span><br><span class="line">       physical id: 0</span><br><span class="line">       bus info: pci@0000:01:00.0</span><br><span class="line">       version: 00</span><br><span class="line">       width: 64 bits</span><br><span class="line">       clock: 33MHz</span><br><span class="line">       capabilities: pm pciexpress msi vga_controller bus_master cap_list</span><br><span class="line">       configuration: latency=0</span><br><span class="line">       resources: memory:c0000000-cfffffff memory:fea20000-fea3ffff ioport:e000(size=256) memory:c0000-dffff</span><br><span class="line">```      </span><br><span class="line">**configuration: latency=0  **    </span><br><span class="line">## 安装驱动：</span><br></pre></td></tr></table></figure><p>kyeup@Taishiji:~$ sudo apt install firmware-linux-nonfree<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">## 安装驱动之后：</span><br></pre></td></tr></table></figure></p><p>kyeup@Taishiji:~$ sudo lshw -c video<br>[sudo] password for kyeup:<br>  *-display<br>       description: VGA compatible controller<br>       product: Whistler LE [Radeon HD 6610M/7610M]<br>       vendor: Advanced Micro Devices, Inc. [AMD/ATI]<br>       physical id: 0<br>       bus info: pci@0000:01:00.0<br>       version: 00<br>       width: 64 bits<br>       clock: 33MHz<br>       capabilities: pm pciexpress msi vga_controller bus_master cap_list rom<br>       configuration: driver=radeon latency=0<br>       resources: irq:43 memory:c0000000-cfffffff memory:fea20000-fea3ffff ioport:e000(size=256) memory:c0000-dffff<br><code>`</code><br><strong>configuration: driver=radeon latency=0</strong><br>有<code>driver=radeon</code> 内容代表驱动已经安装完成。</p>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> debian </tag>
            
            <tag> driver </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Debian 9 更新 sourrce.list(163源）</title>
      <link href="/2018/06/18/Debian%209%20%E6%9B%B4%E6%96%B0%20sourrce.list(163%E6%BA%90%EF%BC%89/"/>
      <url>/2018/06/18/Debian%209%20%E6%9B%B4%E6%96%B0%20sourrce.list(163%E6%BA%90%EF%BC%89/</url>
      <content type="html"><![CDATA[<h1 id="Debian-9-更新-sourrce-list-163源）"><a href="#Debian-9-更新-sourrce-list-163源）" class="headerlink" title="Debian 9 更新 sourrce.list(163源）"></a>Debian 9 更新 sourrce.list(163源）</h1><p><strong>需求说明</strong>：<br>更新apt-get源<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:~$ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:Debian</span><br><span class="line">Description:Debian GNU/Linux 9.4 (stretch)</span><br><span class="line">Release:9.4</span><br><span class="line">Codename:stretch</span><br><span class="line">kyeup@kyeup-nas:~$ cat /etc/apt/source-list</span><br><span class="line"># deb cdrom:[Debian GNU/Linux 9.4.0 _Stretch_ - Official amd64 xfce-CD Binary-1 20180310-11:21]/ stretch main</span><br><span class="line">#deb cdrom:[Debian GNU/Linux 9.4.0 _Stretch_ - Official amd64 xfce-CD Binary-1 20180310-11:21]/ stretch main</span><br><span class="line"></span><br><span class="line">#deb http://mirrors.163.com/debian/ stretch main</span><br><span class="line">#deb-src http://mirrors.163.com/debian/ stretch main</span><br><span class="line"></span><br><span class="line">#deb http://security.debian.org/debian-security stretch/updates main</span><br><span class="line">#deb-src http://security.debian.org/debian-security stretch/updates main</span><br><span class="line"></span><br><span class="line"># stretch-updates, previously known as &apos;volatile&apos;</span><br><span class="line">#deb http://mirrors.163.com/debian/ stretch-updates main</span><br><span class="line">#deb-src http://mirrors.163.com/debian/ stretch-updates main</span><br><span class="line"></span><br><span class="line">deb http://mirrors.163.com/debian/ stretch main non-free contrib</span><br><span class="line">deb http://mirrors.163.com/debian/ stretch-updates main non-free contrib</span><br><span class="line">deb http://mirrors.163.com/debian/ stretch-backports main non-free contrib</span><br><span class="line">deb-src http://mirrors.163.com/debian/ stretch main non-free contrib</span><br><span class="line">deb-src http://mirrors.163.com/debian/ stretch-updates main non-free contrib</span><br><span class="line">deb-src http://mirrors.163.com/debian/ stretch-backports main non-free contrib</span><br><span class="line">deb http://mirrors.163.com/debian-security/ stretch/updates main non-free contrib</span><br><span class="line">deb-src http://mirrors.163.com/debian-security/ stretch/updates main non-free contrib</span><br></pre></td></tr></table></figure></p><p>配置完成后：<br>sudo apt-get update<br>测试。</p>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> apt-get源 - debian </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>自建NAS如何使用大于2TB的硬盘(从分区开始）</title>
      <link href="/2018/06/18/%E8%87%AA%E5%BB%BANAS%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%A4%A7%E4%BA%8E2TB%E7%9A%84%E7%A1%AC%E7%9B%98/"/>
      <url>/2018/06/18/%E8%87%AA%E5%BB%BANAS%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8%E5%A4%A7%E4%BA%8E2TB%E7%9A%84%E7%A1%AC%E7%9B%98/</url>
      <content type="html"><![CDATA[<hr><p><strong>需求说明：</strong><br>自建NAS，自备了两块3T的硬盘，如何操作才能正常的使用？<br>思路说明：  </p><ul><li>按照自己的需求对两块3T硬盘分区；  </li><li>对分区进行格式化；   </li><li>挂载到某一目录（需设置开机自动挂载）  </li><li>上传文件测试；  <h2 id="硬盘分区"><a href="#硬盘分区" class="headerlink" title="硬盘分区"></a>硬盘分区</h2><a id="more"></a>最常见的分区如下所示：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">#系统</span><br><span class="line">kyeup@kyeup-nas:~$ lsb_release -a</span><br><span class="line">No LSB modules are available.</span><br><span class="line">Distributor ID:Debian</span><br><span class="line">Description:Debian GNU/Linux 9.4 (stretch)</span><br><span class="line">Release:9.4</span><br><span class="line">Codename:stretch</span><br><span class="line">kyeup@kyeup-nas:~$ sudo fdisk -l</span><br><span class="line">[sudo] kyeup 的密码：</span><br><span class="line">Disk /dev/sda: 74.5 GiB, 80026361856 bytes, 156301488 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: E57E46D1-111A-4C41-BAFD-62AA237015D1</span><br><span class="line"></span><br><span class="line">Device         Start       End   Sectors  Size Type</span><br><span class="line">/dev/sda1       2048   1050623   1048576  512M EFI System</span><br><span class="line">/dev/sda2    1050624 148615167 147564544 70.4G Linux filesystem</span><br><span class="line">/dev/sda3  148615168 156301311   7686144  3.7G Linux swap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">kyeup@kyeup-nas:~$ sudo fdisk /dev/sdb</span><br><span class="line"></span><br><span class="line">Welcome to fdisk (util-linux 2.29.2).</span><br><span class="line">Changes will remain in memory only, until you decide to write them.</span><br><span class="line">Be careful before using the write command.</span><br><span class="line"></span><br><span class="line">Device does not contain a recognized partition table.</span><br><span class="line">The size of this disk is 2.7 TiB (3000592982016 bytes). DOS partition table format can not be used on drives for volumes larger than 2199023255040 bytes for 512-byte sectors. Use GUID partition table format (GPT).</span><br><span class="line"></span><br><span class="line">Created a new DOS disklabel with disk identifier 0x4d35f874.</span><br><span class="line"></span><br><span class="line">Command (m for help): n</span><br><span class="line">Partition type</span><br><span class="line">   p   primary (0 primary, 0 extended, 4 free)</span><br><span class="line">   e   extended (container for logical partitions)</span><br><span class="line">Select (default p): p</span><br><span class="line">Partition number (1-4, default 1): </span><br><span class="line">First sector (2048-4294967295, default 2048): </span><br><span class="line">Last sector, +sectors or +size&#123;K,M,G,T,P&#125; (2048-4294967294, default 4294967294):   </span><br><span class="line"></span><br><span class="line">Created a new partition 1 of type &apos;Linux&apos; and of size 2 TiB.</span><br><span class="line"></span><br><span class="line">Command (m for help): p</span><br><span class="line">Disk /dev/sdb: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: dos</span><br><span class="line">Disk identifier: 0x4d35f874</span><br><span class="line"></span><br><span class="line">Device     Boot Start        End    Sectors Size Id Type</span><br><span class="line">/dev/sdb1        2048 4294967294 4294965247   2T 83 Linux</span><br><span class="line"></span><br><span class="line">Command (m for help): q</span><br></pre></td></tr></table></figure></li></ul><p>根据上面的提示：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The size of this disk is 2.7 TiB (3000592982016 bytes). DOS partition table format can not be used on drives for volumes larger than 2199023255040 bytes for 512-byte sectors. Use GUID partition table format (GPT).</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Device     Boot Start        End    Sectors Size Id Type</span><br><span class="line">/dev/sdb1        2048 4294967294 4294965247   2T 83 Linux</span><br></pre></td></tr></table></figure><p><strong>MBR 分区表类型最大支持2T，对于大于2T的硬盘需要使用GPT分区</strong>。另外，fdisk只对mbr分区有效，故而使用==parted分区==。</p><p><strong>MBR（Master Boot Record）</strong></p><p>　　主引导记录，是传统的分区机制，应用于绝大多数使用BIOS的PC设备</p><p>　　MBR支持32位和64位系统。</p><p>　　MBR支持分区数量有限。</p><p>　　MBR只支持不超过2T的硬盘，超过2T的硬盘将只能用2T空间（有第三方解决方法）。<br><strong>GPT（GUID Partition Table）</strong></p><p>　　全局唯一标识分区表，是一个较新的分区机制，解决了MBR很多缺点。</p><p>　　支持超过2T的磁盘（64位寻址空间）。fdisk最大只能建立2TB大小的分区，创建一个大于2TB的分区使用parted。</p><p>　　向后兼容MBR。</p><p>　　必须在支持uEFI的硬件上才能使用（Intel提出，用于取代BIOS）。</p><p>　　必须使用64位系统。</p><p>　　Mac、Linux系统都能支持GPT分区格式。</p><p>　　Windows 7/8 64bit、Windows Server 2008 64bit支持GPT。</p><p>　　以上就是Linux系统MBR和GPT分区的区别，总得来说GPT比MBR更先进，但是MBR的兼容性比GPT要好。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:/sys/block$ sudo parted /dev/sdb</span><br><span class="line">GNU Parted 3.2</span><br><span class="line">Using /dev/sdb</span><br><span class="line">Welcome to GNU Parted! Type &apos;help&apos; to view a list of commands.</span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EZRZ-64D85Y0 (scsi)</span><br><span class="line">Disk /dev/sdb: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  File system  Name  Flags</span><br><span class="line"></span><br><span class="line">(parted) mkpart                                                           </span><br><span class="line">Partition name?  []? fun1</span><br><span class="line">File system type?  [ext2]? ext4</span><br><span class="line">Start? 0%</span><br><span class="line">End? 1T</span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EZRZ-64D85Y0 (scsi)</span><br><span class="line">Disk /dev/sdb: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name  Flags</span><br><span class="line"> 1      1049kB  1000GB  1000GB  ext4         fun1</span><br><span class="line"></span><br><span class="line">(parted) mkpart                                                           </span><br><span class="line">Partition name?  []? fun2                                                 </span><br><span class="line">File system type?  [ext2]? ext4</span><br><span class="line">Start? 1T                                                                 </span><br><span class="line">End? 100%                                                                 </span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EZRZ-64D85Y0 (scsi)</span><br><span class="line">Disk /dev/sdb: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name  Flags</span><br><span class="line"> 1      1049kB  1000GB  1000GB  ext4         fun1</span><br><span class="line"> 2      1000GB  3001GB  2001GB  ext4         fun2</span><br><span class="line"></span><br><span class="line">(parted) quit</span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">kyeup@kyeup-nas:~$ sudo parted /dev/sdc</span><br><span class="line">GNU Parted 3.2</span><br><span class="line">Using /dev/sdc</span><br><span class="line">Welcome to GNU Parted! Type &apos;help&apos; to view a list of commands.</span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EFRX-68EUZN0 (scsi)</span><br><span class="line">Disk /dev/sdc: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start  End  Size  File system  Name  Flags</span><br><span class="line"></span><br><span class="line">(parted) mkpart                                                           </span><br><span class="line">Partition name?  []? work1                                                </span><br><span class="line">File system type?  [ext2]? ext4</span><br><span class="line">Start? 0%                                                                 </span><br><span class="line">End? 1T                                                                   </span><br><span class="line">(parted) mkpart                                                           </span><br><span class="line">Partition name?  []? work2</span><br><span class="line">File system type?  [ext2]? ext4                                           </span><br><span class="line">Start? 1T                                                                 </span><br><span class="line">End? 100%                                                                 </span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EFRX-68EUZN0 (scsi)</span><br><span class="line">Disk /dev/sdc: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name   Flags</span><br><span class="line"> 1      1049kB  1000GB  1000GB  ext4         work1</span><br><span class="line"> 2      1000GB  3001GB  2001GB  ext4         work2</span><br><span class="line"></span><br><span class="line">(parted) quit                                                             </span><br><span class="line">Information: You may need to update /etc/fstab.</span><br><span class="line"></span><br><span class="line">kyeup@kyeup-nas:~$ sudo fdisk -l</span><br><span class="line">Disk /dev/sda: 74.5 GiB, 80026361856 bytes, 156301488 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: E57E46D1-111A-4C41-BAFD-62AA237015D1</span><br><span class="line"></span><br><span class="line">Device         Start       End   Sectors  Size Type</span><br><span class="line">/dev/sda1       2048   1050623   1048576  512M EFI System</span><br><span class="line">/dev/sda2    1050624 148615167 147564544 70.4G Linux filesystem</span><br><span class="line">/dev/sda3  148615168 156301311   7686144  3.7G Linux swap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: 16CD8258-758E-4FE4-B198-DF40ABE49BE3</span><br><span class="line"></span><br><span class="line">Device          Start        End    Sectors   Size Type</span><br><span class="line">/dev/sdc1        2048 1953124351 1953122304 931.3G Linux filesystem</span><br><span class="line">/dev/sdc2  1953124352 5860532223 3907407872   1.8T Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: BD41449F-41EB-43DB-B797-185363963AE1</span><br><span class="line"></span><br><span class="line">Device          Start        End    Sectors   Size Type</span><br><span class="line">/dev/sdb1        2048 1953124351 1953122304 931.3G Linux filesystem</span><br><span class="line">/dev/sdb2  1953124352 5860532223 3907407872   1.8T Linux filesystem</span><br></pre></td></tr></table></figure></p><blockquote><p>Start? 0%<br>End? 1T<br>(parted) mkpart<br>Partition name?  []? work2<br>File system type?  [ext2]? ext4<br>Start? 1T<br>End? 100%<br>注意此处是0%  100%</p></blockquote><h2 id="对分区进行格式化"><a href="#对分区进行格式化" class="headerlink" title="对分区进行格式化"></a>对分区进行格式化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:~$ sudo fdisk -l</span><br><span class="line">Disk /dev/sda: 74.5 GiB, 80026361856 bytes, 156301488 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: E57E46D1-111A-4C41-BAFD-62AA237015D1</span><br><span class="line"></span><br><span class="line">Device         Start       End   Sectors  Size Type</span><br><span class="line">/dev/sda1       2048   1050623   1048576  512M EFI System</span><br><span class="line">/dev/sda2    1050624 148615167 147564544 70.4G Linux filesystem</span><br><span class="line">/dev/sda3  148615168 156301311   7686144  3.7G Linux swap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdc: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: 16CD8258-758E-4FE4-B198-DF40ABE49BE3</span><br><span class="line"></span><br><span class="line">Device          Start        End    Sectors   Size Type</span><br><span class="line">/dev/sdc1        2048 1953124351 1953122304 931.3G Linux filesystem</span><br><span class="line">/dev/sdc2  1953124352 5860532223 3907407872   1.8T Linux filesystem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Disk /dev/sdb: 2.7 TiB, 3000592982016 bytes, 5860533168 sectors</span><br><span class="line">Units: sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 4096 bytes</span><br><span class="line">I/O size (minimum/optimal): 4096 bytes / 4096 bytes</span><br><span class="line">Disklabel type: gpt</span><br><span class="line">Disk identifier: BD41449F-41EB-43DB-B797-185363963AE1</span><br><span class="line"></span><br><span class="line">Device          Start        End    Sectors   Size Type</span><br><span class="line">/dev/sdb1        2048 1953124351 1953122304 931.3G Linux filesystem</span><br><span class="line">/dev/sdb2  1953124352 5860532223 3907407872   1.8T Linux filesystem</span><br><span class="line">kyeup@kyeup-nas:~$ sudo mkfs.ext4 /dev/sdb1</span><br><span class="line">mke2fs 1.43.4 (31-Jan-2017)</span><br><span class="line">创建含有 244140288 个块（每块 4k）和 61038592 个inode的文件系统</span><br><span class="line">文件系统UUID：a5fc03f1-255b-4561-b3b2-9c17c324d935</span><br><span class="line">超级块的备份存储于下列块： </span><br><span class="line">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">102400000, 214990848</span><br><span class="line"></span><br><span class="line">正在分配组表： 完成                            </span><br><span class="line">正在写入inode表： 完成                            </span><br><span class="line">创建日志（262144 个块）完成</span><br><span class="line">写入超级块和文件系统账户统计信息： 已完成   </span><br><span class="line"></span><br><span class="line">kyeup@kyeup-nas:~$ sudo mkfs.ext4 /dev/sdb2</span><br><span class="line">mke2fs 1.43.4 (31-Jan-2017)</span><br><span class="line">创建含有 488425984 个块（每块 4k）和 122109952 个inode的文件系统</span><br><span class="line">文件系统UUID：b4e66cc9-f7c0-489b-beda-8e5a481c61e0</span><br><span class="line">超级块的备份存储于下列块： </span><br><span class="line">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">102400000, 214990848</span><br><span class="line"></span><br><span class="line">正在分配组表： 完成                            </span><br><span class="line">正在写入inode表： 完成                            </span><br><span class="line">创建日志（262144 个块）完成</span><br><span class="line">写入超级块和文件系统账户统计信息： 已完成     </span><br><span class="line"></span><br><span class="line">kyeup@kyeup-nas:~$ sudo mkfs.ext4 /dev/sdc1</span><br><span class="line">mke2fs 1.43.4 (31-Jan-2017)</span><br><span class="line">创建含有 244140288 个块（每块 4k）和 61038592 个inode的文件系统</span><br><span class="line">文件系统UUID：b568092d-ccba-47ca-ba38-af90db375983</span><br><span class="line">超级块的备份存储于下列块： </span><br><span class="line">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">102400000, 214990848</span><br><span class="line"></span><br><span class="line">正在分配组表： 完成                            </span><br><span class="line">正在写入inode表： 完成                            </span><br><span class="line">创建日志（262144 个块）完成</span><br><span class="line">写入超级块和文件系统账户统计信息： 已完成   </span><br><span class="line"></span><br><span class="line">kyeup@kyeup-nas:~$ sudo mkfs.ext4 /dev/sdc2</span><br><span class="line">mke2fs 1.43.4 (31-Jan-2017)</span><br><span class="line">创建含有 488425984 个块（每块 4k）和 122109952 个inode的文件系统</span><br><span class="line">文件系统UUID：837dfafb-3cff-4c15-9bea-33cc18abc3bb</span><br><span class="line">超级块的备份存储于下列块： </span><br><span class="line">32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">102400000, 214990848</span><br><span class="line"></span><br><span class="line">正在分配组表： 完成                            </span><br><span class="line">正在写入inode表： 完成                            </span><br><span class="line">创建日志（262144 个块）完成</span><br><span class="line">写入超级块和文件系统账户统计信息： 已完成</span><br></pre></td></tr></table></figure><h2 id="挂载到某一目录（需设置开机自动挂载）"><a href="#挂载到某一目录（需设置开机自动挂载）" class="headerlink" title="挂载到某一目录（需设置开机自动挂载）"></a>挂载到某一目录（需设置开机自动挂载）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:~$ sudo blkid</span><br><span class="line">/dev/sda1: UUID=&quot;8982-B086&quot; TYPE=&quot;vfat&quot; PARTUUID=&quot;b5461768-be0f-4ff2-bccb-44ebc7f84a5d&quot;</span><br><span class="line">/dev/sda2: UUID=&quot;17dbffb4-ff98-4ba4-b0c0-270d0ac12f07&quot; TYPE=&quot;ext4&quot; PARTUUID=&quot;4be18a0f-4d18-47a5-8c94-580251b97803&quot;</span><br><span class="line">/dev/sda3: UUID=&quot;effcd1ac-b4ed-4c62-894c-66aca5fc61f2&quot; TYPE=&quot;swap&quot; PARTUUID=&quot;4a1dfc34-9c37-4345-8516-7e5d868eaef6&quot;</span><br><span class="line">/dev/sdc1: UUID=&quot;b568092d-ccba-47ca-ba38-af90db375983&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;work1&quot; PARTUUID=&quot;e57513c5-a3d4-4b5d-a4a7-0ab1980f153b&quot;</span><br><span class="line">/dev/sdc2: UUID=&quot;837dfafb-3cff-4c15-9bea-33cc18abc3bb&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;work2&quot; PARTUUID=&quot;0a993b35-34b6-49fc-80e3-aac086304ff0&quot;</span><br><span class="line">/dev/sdb1: UUID=&quot;a5fc03f1-255b-4561-b3b2-9c17c324d935&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;fun1&quot; PARTUUID=&quot;00edb0eb-153a-41bd-9aa8-99749c1dac4a&quot;</span><br><span class="line">/dev/sdb2: UUID=&quot;b4e66cc9-f7c0-489b-beda-8e5a481c61e0&quot; TYPE=&quot;ext4&quot; PARTLABEL=&quot;fun2&quot; PARTUUID=&quot;dc10cdd3-4d52-47f7-be6d-85e04f7c1acd&quot;</span><br><span class="line">#新建挂载的目录 </span><br><span class="line">kyeup@kyeup-nas:~$ sudo mkdir /fun1 /fun2 /work1 /work2</span><br><span class="line">#编辑 /etc/fstab</span><br><span class="line">kyeup@kyeup-nas:~$ sudo cat /etc/fstab</span><br><span class="line"># /etc/fstab: static file system information.</span><br><span class="line">#</span><br><span class="line"># Use &apos;blkid&apos; to print the universally unique identifier for a</span><br><span class="line"># device; this may be used with UUID= as a more robust way to name devices</span><br><span class="line"># that works even if disks are added and removed. See fstab(5).</span><br><span class="line">#</span><br><span class="line"># &lt;file system&gt; &lt;mount point&gt;   &lt;type&gt;  &lt;options&gt;       &lt;dump&gt;  &lt;pass&gt;</span><br><span class="line"># / was on /dev/sda2 during installation</span><br><span class="line">UUID=17dbffb4-ff98-4ba4-b0c0-270d0ac12f07 /               ext4    errors=remount-ro 0       1</span><br><span class="line"># /boot/efi was on /dev/sda1 during installation</span><br><span class="line">UUID=8982-B086  /boot/efi       vfat    umask=0077      0       1</span><br><span class="line"># swap was on /dev/sda3 during installation</span><br><span class="line">UUID=effcd1ac-b4ed-4c62-894c-66aca5fc61f2 none            swap    sw              0       0</span><br><span class="line"></span><br><span class="line">UUID=a5fc03f1-255b-4561-b3b2-9c17c324d935/fun1ext4defaults0      0</span><br><span class="line"></span><br><span class="line">UUID=b4e66cc9-f7c0-489b-beda-8e5a481c61e0/fun2ext4defaults0      0</span><br><span class="line"></span><br><span class="line">UUID=b568092d-ccba-47ca-ba38-af90db375983/work1ext4defaults0      0</span><br><span class="line"></span><br><span class="line">UUID=837dfafb-3cff-4c15-9bea-33cc18abc3bb/work2ext4defaults0      0</span><br><span class="line">kyeup@kyeup-nas:~$ sudo mount -a</span><br><span class="line">kyeup@kyeup-nas:~$ df -h</span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">udev            1.8G     0  1.8G    0% /dev</span><br><span class="line">tmpfs           362M  5.5M  356M    2% /run</span><br><span class="line">/dev/sda2        69G  3.5G   62G    6% /</span><br><span class="line">tmpfs           1.8G     0  1.8G    0% /dev/shm</span><br><span class="line">tmpfs           5.0M  4.0K  5.0M    1% /run/lock</span><br><span class="line">tmpfs           1.8G     0  1.8G    0% /sys/fs/cgroup</span><br><span class="line">/dev/sda1       511M  132K  511M    1% /boot/efi</span><br><span class="line">tmpfs           362M     0  362M    0% /run/user/1000</span><br><span class="line">/dev/sdb1       916G   77M  870G    1% /fun1</span><br><span class="line">/dev/sdb2       1.8T   77M  1.7T    1% /fun2</span><br><span class="line">/dev/sdc1       916G   77M  870G    1% /work1</span><br><span class="line">/dev/sdc2       1.8T   77M  1.7T    1% /work2</span><br></pre></td></tr></table></figure><h2 id="上传文件测试；"><a href="#上传文件测试；" class="headerlink" title="上传文件测试；"></a>上传文件测试；</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:/fun2$ ls /fun[12] /work[12]</span><br><span class="line">/fun1:</span><br><span class="line">lost+found</span><br><span class="line"></span><br><span class="line">/fun2:</span><br><span class="line">lost+found</span><br><span class="line"></span><br><span class="line">/work1:</span><br><span class="line">lost+found</span><br><span class="line"></span><br><span class="line">/work2:</span><br><span class="line">lost+found</span><br><span class="line">kyeup@kyeup-nas:/fun1$ sudo mkdir movie</span><br><span class="line">kyeup@kyeup-nas:/fun1$ ls</span><br><span class="line">lost+found  movie</span><br><span class="line">kyeup@kyeup-nas:~$ sudo chown kyeup:kyeup /fun1/movie/</span><br><span class="line">kyeup@kyeup-nas:/fun1/movie$ mkdir study</span><br></pre></td></tr></table></figure><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>在分区的时候一定格外注意：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:~$ sudo parted /dev/sdc</span><br><span class="line">GNU Parted 3.2</span><br><span class="line">Using /dev/sdc</span><br><span class="line">Welcome to GNU Parted! Type &apos;help&apos; to view a list of commands.</span><br><span class="line">(parted) mktable                                                          </span><br><span class="line">New disk label type? work1</span><br><span class="line">parted: invalid token: work1</span><br><span class="line">New disk label type? gpt                                                  </span><br><span class="line">(parted) mkpart</span><br><span class="line">Partition name?  []? work1                                                </span><br><span class="line">File system type?  [ext2]? ext4                                           </span><br><span class="line">Start? 0                                                                  </span><br><span class="line">End? 1T                                                                   </span><br><span class="line">Warning: The resulting partition is not properly aligned for best performance.</span><br><span class="line">Ignore/Cancel? i                                                          </span><br><span class="line">(parted) mkpart</span><br><span class="line">Partition name?  []? work2                                                </span><br><span class="line">File system type?  [ext2]? ext4                                           </span><br><span class="line">Start? 1T                                                                 </span><br><span class="line">End? 100%                                                                 </span><br><span class="line">(parted) p                                                                </span><br><span class="line">Model: ATA WD30EFRX-68EUZN0 (scsi)</span><br><span class="line">Disk /dev/sdc: 3001GB</span><br><span class="line">Sector size (logical/physical): 512B/4096B</span><br><span class="line">Partition Table: gpt</span><br><span class="line">Disk Flags: </span><br><span class="line"></span><br><span class="line">Number  Start   End     Size    File system  Name   Flags</span><br><span class="line"> 1      17.4kB  1000GB  1000GB  ext4         work1</span><br><span class="line"> 2      1000GB  3001GB  2001GB  ext4         work2</span><br></pre></td></tr></table></figure></p><p>在start的时候，<strong>不能输入 0 或者 1</strong>，在网上大多采用这种方法，但是在后面的格式化中出现：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">kyeup@kyeup-nas:~$ sudo mkfs.ext4 /dev/sdb1</span><br><span class="line">mke2fs 1.43.4 (31-Jan-2017)</span><br><span class="line">/dev/sdb1 未对齐，偏移了 3072 个字节。</span><br><span class="line">这可能导致性能下降，建议重新进行分区。</span><br><span class="line">创建含有 244140620 个块（每块 4k）和 61038592 个inode的文件系统</span><br><span class="line">文件系统UUID：d16b9bfe-8485-4795-a4ef-aeb6bf2d914e</span><br><span class="line">超级块的备份存储于下列块： </span><br><span class="line">  32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br><span class="line">  4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br><span class="line">  102400000, 214990848</span><br><span class="line"></span><br><span class="line">正在分配组表： 完成                            </span><br><span class="line">正在写入inode表： 完成                            </span><br><span class="line">创建日志（262144 个块）完成</span><br><span class="line">写入超级块和文件系统账户统计信息： 已完成</span><br></pre></td></tr></table></figure></p><p>所以出现了<strong>“4K对齐”</strong>的问题，网上有解决办法，但是试过不行之有效，所以最好的办法是使用百分比（%）的方式划分。  </p><p>希望大家遇到此类问题能很快的解决！o(∩_∩)o </p>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> NAS </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>oracle11gR2下scott用户以及表的建立</title>
      <link href="/2018/06/15/oracle11gR2%E4%B8%8Bscott%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B/"/>
      <url>/2018/06/15/oracle11gR2%E4%B8%8Bscott%E7%94%A8%E6%88%B7%E4%BB%A5%E5%8F%8A%E8%A1%A8%E7%9A%84%E5%BB%BA%E7%AB%8B/</url>
      <content type="html"><![CDATA[<h1 id="oracle11gR2下scott用户以及表的建立"><a href="#oracle11gR2下scott用户以及表的建立" class="headerlink" title="oracle11gR2下scott用户以及表的建立"></a>oracle11gR2下scott用户以及表的建立</h1><hr><blockquote><p>在oralce数据库安装完成之后，没有scott用户以及练习表，如何建立用户以及系统提供的表呢？</p></blockquote><p><strong>操作步骤</strong>：</p><h2 id="找到系统带的sql文件（utlsample-sql）"><a href="#找到系统带的sql文件（utlsample-sql）" class="headerlink" title="找到系统带的sql文件（utlsample.sql）"></a>找到系统带的sql文件（utlsample.sql）</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@kyeup01 admin]# pwd</span><br><span class="line">/oracle/app/oracle/product/11.2.0/rdbms/admin</span><br><span class="line">[root@kyeup01 admin]# ll utlsampl.sql </span><br><span class="line">-rw-r<span class="comment">--r--. 1 oracle oinstall 3676 6月   2 2006 utlsampl.sql</span></span><br><span class="line">`</span><br></pre></td></tr></table></figure><h2 id="根据SQL的内容操作"><a href="#根据SQL的内容操作" class="headerlink" title="根据SQL的内容操作"></a>根据SQL的内容操作</h2><h3 id="新建用户并授权"><a href="#新建用户并授权" class="headerlink" title="新建用户并授权"></a>新建用户并授权</h3><a id="more"></a><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 删除系统带的用户</span><br><span class="line">DROP USER SCOTT CASCADE;</span><br><span class="line">DROP USER ADAMS CASCADE;</span><br><span class="line">DROP USER JONES CASCADE;</span><br><span class="line">DROP USER CLARK CASCADE;</span><br><span class="line">DROP USER BLAKE CASCADE;</span><br><span class="line">&lt;!-- more --&gt;</span><br><span class="line">-- 授权scott相应的权限</span><br><span class="line">GRANT CONNECT,RESOURCE,UNLIMITED TABLESPACE TO SCOTT IDENTIFIED BY tiger;</span><br><span class="line"></span><br><span class="line">DROP PUBLIC SYNONYM PARTS;</span><br></pre></td></tr></table></figure><h3 id="scott登录"><a href="#scott登录" class="headerlink" title="scott登录"></a>scott登录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[oracle@kyeup01 admin]$ sqlplus &apos;/as sysdba&apos;</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release 11.2.0.4.0 Production on Fri Jun 15 11:31:17 2018</span><br><span class="line">Copyright (c) 1982, 2013, Oracle.  All rights reserved.</span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br><span class="line">SQL&gt; conn scott/tiger;</span><br><span class="line">Connected.</span><br></pre></td></tr></table></figure><h3 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE DEPT</span><br><span class="line">       (DEPTNO NUMBER(2) CONSTRAINT PK_DEPT PRIMARY KEY,</span><br><span class="line">DNAME VARCHAR2(14) ,</span><br><span class="line">LOC VARCHAR2(13) ) ;</span><br><span class="line">CREATE TABLE EMP</span><br><span class="line">       (EMPNO NUMBER(4) CONSTRAINT PK_EMP PRIMARY KEY,</span><br><span class="line">ENAME VARCHAR2(10),</span><br><span class="line">JOB VARCHAR2(9),</span><br><span class="line">MGR NUMBER(4),</span><br><span class="line">HIREDATE DATE,</span><br><span class="line">SAL NUMBER(7,2),</span><br><span class="line">COMM NUMBER(7,2),</span><br><span class="line">DEPTNO NUMBER(2) CONSTRAINT FK_DEPTNO REFERENCES DEPT);</span><br><span class="line">INSERT INTO DEPT VALUES</span><br><span class="line">(10,&apos;ACCOUNTING&apos;,&apos;NEW YORK&apos;);</span><br><span class="line">INSERT INTO DEPT VALUES (20,&apos;RESEARCH&apos;,&apos;DALLAS&apos;);</span><br><span class="line">INSERT INTO DEPT VALUES</span><br><span class="line">(30,&apos;SALES&apos;,&apos;CHICAGO&apos;);</span><br><span class="line">INSERT INTO DEPT VALUES</span><br><span class="line">(40,&apos;OPERATIONS&apos;,&apos;BOSTON&apos;);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7369,&apos;SMITH&apos;,&apos;CLERK&apos;,7902,to_date(&apos;17-12-1980&apos;,&apos;dd-mm-yyyy&apos;),800,NULL,20);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7499,&apos;ALLEN&apos;,&apos;SALESMAN&apos;,7698,to_date(&apos;20-2-1981&apos;,&apos;dd-mm-yyyy&apos;),1600,300,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7521,&apos;WARD&apos;,&apos;SALESMAN&apos;,7698,to_date(&apos;22-2-1981&apos;,&apos;dd-mm-yyyy&apos;),1250,500,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7566,&apos;JONES&apos;,&apos;MANAGER&apos;,7839,to_date(&apos;2-4-1981&apos;,&apos;dd-mm-yyyy&apos;),2975,NULL,20);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7654,&apos;MARTIN&apos;,&apos;SALESMAN&apos;,7698,to_date(&apos;28-9-1981&apos;,&apos;dd-mm-yyyy&apos;),1250,1400,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7698,&apos;BLAKE&apos;,&apos;MANAGER&apos;,7839,to_date(&apos;1-5-1981&apos;,&apos;dd-mm-yyyy&apos;),2850,NULL,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7782,&apos;CLARK&apos;,&apos;MANAGER&apos;,7839,to_date(&apos;9-6-1981&apos;,&apos;dd-mm-yyyy&apos;),2450,NULL,10);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7788,&apos;SCOTT&apos;,&apos;ANALYST&apos;,7566,to_date(&apos;13-JUL-87&apos;,&apos;dd-mm-rr&apos;)-85,3000,NULL,20);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7839,&apos;KING&apos;,&apos;PRESIDENT&apos;,NULL,to_date(&apos;17-11-1981&apos;,&apos;dd-mm-yyyy&apos;),5000,NULL,10);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7844,&apos;TURNER&apos;,&apos;SALESMAN&apos;,7698,to_date(&apos;8-9-1981&apos;,&apos;dd-mm-yyyy&apos;),1500,0,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7876,&apos;ADAMS&apos;,&apos;CLERK&apos;,7788,to_date(&apos;13-JUL-87&apos;, &apos;dd-mm-rr&apos;)-51,1100,NULL,20);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7900,&apos;JAMES&apos;,&apos;CLERK&apos;,7698,to_date(&apos;3-12-1981&apos;,&apos;dd-mm-yyyy&apos;),950,NULL,30);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7902,&apos;FORD&apos;,&apos;ANALYST&apos;,7566,to_date(&apos;3-12-1981&apos;,&apos;dd-mm-yyyy&apos;),3000,NULL,20);</span><br><span class="line">INSERT INTO EMP VALUES</span><br><span class="line">(7934,&apos;MILLER&apos;,&apos;CLERK&apos;,7782,to_date(&apos;23-1-1982&apos;,&apos;dd-mm-yyyy&apos;),1300,NULL,10);</span><br><span class="line">CREATE TABLE BONUS</span><br><span class="line">(</span><br><span class="line">ENAME VARCHAR2(10),</span><br><span class="line">JOB VARCHAR2(9)  ,</span><br><span class="line">SAL NUMBER,</span><br><span class="line">COMM NUMBER</span><br><span class="line">) ;</span><br><span class="line">CREATE TABLE SALGRADE</span><br><span class="line">      ( GRADE NUMBER,</span><br><span class="line">LOSAL NUMBER,</span><br><span class="line">HISAL NUMBER );</span><br><span class="line">INSERT INTO SALGRADE VALUES (1,700,1200);</span><br><span class="line">INSERT INTO SALGRADE VALUES (2,1201,1400);</span><br><span class="line">INSERT INTO SALGRADE VALUES (3,1401,2000);</span><br><span class="line">INSERT INTO SALGRADE VALUES (4,2001,3000);</span><br><span class="line">INSERT INTO SALGRADE VALUES (5,3001,9999);</span><br><span class="line">COMMIT;</span><br></pre></td></tr></table></figure><h3 id="查询表（使用pl-sql）"><a href="#查询表（使用pl-sql）" class="headerlink" title="查询表（使用pl/sql）"></a>查询表（使用pl/sql）</h3><p><img src="http://p9sk1hcki.bkt.clouddn.com/scott.emp.png" alt="SCOTT.EMP"></p><h1 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h1><p>以上的方法可能不是最优的方法，相当于把utlsample.sql手工执行了。<br>网上的资料大都是这样执行的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[oracle@kyeup01 admin]$ sqlplus &apos;/as sysdba&apos;</span><br><span class="line">SQL*Plus: Release 11.2.0.4.0 Production on Fri Jun 15 11:46:27 2018</span><br><span class="line">Copyright (c) 1982, 2013, Oracle.  All rights reserved.</span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br><span class="line">SQL&gt; @/oracle/app/oracle/product/11.2.0/rdbms/admin/utlsample.sql</span><br><span class="line">SP2-0310: unable to open file &quot;/oracle/app/oracle/product/11.2.0/rdbms/admin/utlsample.sql&quot;</span><br></pre></td></tr></table></figure></p><p>其实命令操作错误，正确的操作如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">[oracle@kyeup01 admin]$ sqlplus &apos;/as sysdba&apos;</span><br><span class="line">SQL*Plus: Release 11.2.0.4.0 Production on Fri Jun 15 11:46:27 2018</span><br><span class="line">Copyright (c) 1982, 2013, Oracle.  All rights reserved.</span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br><span class="line">SQL&gt;start /oracle/app/oracle/product/11.2.0/rdbms/admin/utlsampl.sql</span><br><span class="line">Table created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Table created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Table created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Table created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1 row created.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Commit complete.</span><br><span class="line"></span><br><span class="line">Disconnected from Oracle Database 11g Enterprise Edition Release 11.2.0.4.0 - 64bit Production</span><br><span class="line">With the Partitioning, Automatic Storage Management, OLAP, Data Mining</span><br><span class="line">and Real Application Testing options</span><br></pre></td></tr></table></figure></p><p>正解！</p>]]></content>
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oracle </tag>
            
            <tag> troubleshooting </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>RHEL6.0 yum源设置</title>
      <link href="/2018/06/14/RHEL6.0%20yum%E6%BA%90%E8%AE%BE%E7%BD%AE/"/>
      <url>/2018/06/14/RHEL6.0%20yum%E6%BA%90%E8%AE%BE%E7%BD%AE/</url>
      <content type="html"><![CDATA[<h1 id="设置163yum源"><a href="#设置163yum源" class="headerlink" title="设置163yum源"></a>设置163yum源</h1><h2 id="卸载系统的yum"><a href="#卸载系统的yum" class="headerlink" title="卸载系统的yum"></a>卸载系统的yum</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]#rpm -qa | grep yum | xargs rpm -e --nodeps</span><br></pre></td></tr></table></figure><h2 id="检查是否已经卸载完成"><a href="#检查是否已经卸载完成" class="headerlink" title="检查是否已经卸载完成"></a>检查是否已经卸载完成</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]#rpm -qa | grep yum |</span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="下载yum以及相关包"><a href="#下载yum以及相关包" class="headerlink" title="下载yum以及相关包"></a>下载yum以及相关包</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]<span class="comment"># cd /tmp/</span></span><br><span class="line">[root@db01 tmp]<span class="comment"># wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-3.2.29-81.el6.centos.noarch.rpm</span></span><br><span class="line">[root@db01 tmp]<span class="comment"># wget http://mirrors.163.com/centos/6/os/x86_64/Packages/python-iniparse-0.3.1-2.1.el6.noarch.rpm</span></span><br><span class="line">[root@db01 tmp]<span class="comment"># wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-metadata-parser-1.1.2-16.el6.x86_64.rpm</span></span><br><span class="line">[root@db01 tmp]<span class="comment"># wget http://mirrors.163.com/centos/6/os/x86_64/Packages/yum-plugin-fastestmirror-1.1.30-40.el6.noarch.rpm</span></span><br></pre></td></tr></table></figure><h2 id="安装yum相关rpm包"><a href="#安装yum相关rpm包" class="headerlink" title="安装yum相关rpm包"></a>安装yum相关rpm包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 tmp]# rpm -ivh python-iniparse-0.3.1-2.1.el6.noarch.rpm </span><br><span class="line">[root@db01 tmp]# rpm -ivh yum-metadata-parser-1.1.2-16.el6.x86_64.rpm</span><br></pre></td></tr></table></figure><p>安装yum-3.2.29-81.el6.centos.noarch.rpm的时候提示需要安装python-urlgrabber-3.9.1-11.el6.noarch.rpm，下载相应的包，但是在安装python-urlgrabber-3.9.1-11.el6.noarch.rpm的时候提示：</p><p>warning: /root/python-urlgrabber-3.9.1-11.el6.noarch.rpm: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY</p><p>先下载RPM-GPG-KEY-CentOS-6的命令如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http://mirrors.163.com/centos/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure></p><p>然后运行rpm –import RPM*</p><p>安装完成 python-urlgrabber-3后继续：【有顺序，有依赖】<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 tmp]# rpm -ivh yum-plugin-fastestmirror-1.1.30-40.el6.noarch.rpm yum-3.2.29-81.el6.centos.noarch.rpm</span><br></pre></td></tr></table></figure></p><h2 id="清除原有缓存，建立yum列表"><a href="#清除原有缓存，建立yum列表" class="headerlink" title="清除原有缓存，建立yum列表"></a>清除原有缓存，建立yum列表</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 tmp]# yum clean all</span><br><span class="line">[root@db01 tmp]# yum makecache</span><br></pre></td></tr></table></figure><blockquote><p><strong>备注</strong>：<br>以上的操作步骤来自网络，实际应用没有问题，这是联网状态下更新yum源；<br>其实在生产环境下不一定能连接外网，用的最多的是把安装盘mount到本地，设置本地yum源。</p></blockquote><h1 id="本地yum源设置"><a href="#本地yum源设置" class="headerlink" title="本地yum源设置"></a>本地yum源设置</h1><h2 id="挂载本地光盘"><a href="#挂载本地光盘" class="headerlink" title="挂载本地光盘"></a>挂载本地光盘</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# mount /dev/cdrom /mnt</span><br><span class="line">mount: block device /dev/sr0 is write-protected, mounting read-only</span><br><span class="line">[root@db01 ~]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/sda1        42G  5.4G   34G  14% /</span><br><span class="line">tmpfs           2.0G   90M  1.9G   5% /dev/shm</span><br><span class="line">/dev/sdb1        45G  9.0G   34G  22% /oracle</span><br><span class="line">/dev/sdc1        40G  4.5G   33G  12% /soft</span><br><span class="line">/dev/sr0        3.6G  3.6G     0 100% /mnt</span><br></pre></td></tr></table></figure><h2 id="修改配置文件"><a href="#修改配置文件" class="headerlink" title="修改配置文件"></a>修改配置文件</h2><p><strong>在结尾出添加以下内容后保存</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@db01 ~]# vi /etc/yum.conf </span><br><span class="line">[RHEL]</span><br><span class="line">name =Linux 6.5 DVD</span><br><span class="line">baseurl=file:///mnt/Server/</span><br><span class="line">gpgcheck=0</span><br><span class="line">enabled=1</span><br></pre></td></tr></table></figure><h2 id="测试安装rpm包"><a href="#测试安装rpm包" class="headerlink" title="测试安装rpm包"></a>测试安装rpm包</h2><figure class="highlight plain"><figcaption><span>~]# yum install lrzsz*</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Loaded plugins: product-id, refresh-packagekit, security, subscription-manager</span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line">RHEL                                                                                             | 3.9 kB     00:00 ... </span><br><span class="line">Setting up Install Process</span><br><span class="line">Package lrzsz-0.12.20-27.1.el6.x86_64 already installed and latest version</span><br><span class="line">Nothing to do</span><br><span class="line">[root@db01 ~]#</span><br></pre></td></tr></table></figure><blockquote><p><strong>备注</strong>：<br>在项目实施中，遇到此类问题，游刃有余才行哟^_^.</p></blockquote>]]></content>
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> yum源 - linux </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>呼叫中心坐席功能都有哪些</title>
      <link href="/2018/06/13/%E5%91%BC%E5%8F%AB%E4%B8%AD%E5%BF%83%E5%9D%90%E5%B8%AD%E5%8A%9F%E8%83%BD%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B/"/>
      <url>/2018/06/13/%E5%91%BC%E5%8F%AB%E4%B8%AD%E5%BF%83%E5%9D%90%E5%B8%AD%E5%8A%9F%E8%83%BD%E9%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B/</url>
      <content type="html"><![CDATA[<blockquote><p>IPCC是IP呼叫中心（IP CallCenter）的简称，本质上是以IP技术和IP语音为主要应用技术的呼叫中心构建方式，即利用IP传输网来传输与交换语音、图像和文本等信息。（摘自 百度百科）</p></blockquote><h3 id="为什么写这篇文章呢？"><a href="#为什么写这篇文章呢？" class="headerlink" title="为什么写这篇文章呢？"></a>为什么写这篇文章呢？</h3><p>首先 ，这与我的工作有关系，从事这门行业时间久了，有些身边的家人朋友还不清楚自己做什么的（可能隔行如隔山，真的不懂）。<br><a id="more"></a><br>其实IP呼叫中心只是我接触的项目中的一小部分，在此举例说明下生活中常见的呼叫中心，比如中国移动的10086客服热线、电信公司10000号、预定火车票12306、顺丰快递95338热线等，打电话进去听到语音导航，转接，业务的自助查询办理，以上说的这些都是呼叫中心平台的典型应用（估计很多小伙伴都知道我是做什么的了，o(∩_∩)o ）。</p><p>另外，与一些做业务系统开发的合作伙伴沟通时，涉及IPCC的一些功能不了解（<em>请耐心对待没接触IP语音行业的小伙伴们</em>），为此科普下呼叫中心坐席人员用到的一些功能,希望有多多少少的帮助。</p><h3 id="呼叫中心坐席功能有哪些呢？"><a href="#呼叫中心坐席功能有哪些呢？" class="headerlink" title="呼叫中心坐席功能有哪些呢？"></a>呼叫中心坐席功能有哪些呢？</h3><p><code>普通坐席条(以厂家大唐高鸿提供的坐席条为例)</code></p><p><img src="http://pa7q376wi.bkt.clouddn.com/gohigh-ptzx.png" alt=""></p><ul><li><strong>复位</strong>：可以在坐席工具条的状态非正常时，重新使状态条的工作状态恢复初试状态，从而继续正常工作。</li><li><strong>置忙</strong>：表示坐席员现在正在接电话或处理别的事情，这时电话不会被分配到该坐席。</li><li><strong>置闲</strong>：表示坐席员现在的状态可以正常接电话，这时如有电话会分配到该坐席。</li><li><strong>外拨</strong>：往外拨电话。</li><li><strong>取消外拨</strong>：在外拨时，对方摘机之前，点击取消外拨，会停止外拨。</li><li><strong>保持</strong>：在通话状态点击保持，会进入保持状态，被叫方进入放音状态。</li><li><strong>取保持</strong>：在保持状态点击取保持，将会恢复通话。</li><li><strong>挂机</strong>：在通话状态点击挂机，坐席挂机。</li><li><strong>咨询</strong>：坐席在通话状态，输入三方号码，点击咨询按钮，被咨询方振铃，被咨询方摘机之后坐席与被咨询方建立通话，客户方放音乐。</li><li><strong>三方</strong>：在咨询成功之后，点击三方通话按钮，建立客户，坐席，被咨询方的三方通话。</li><li><strong>盲转</strong>：在客户与坐席建立通话状态，坐席输入坐席盲转号码，点击坐席盲转按钮，客户方放音，被盲转方振铃，坐席分机挂机，当被盲转方摘机。被盲转方与客户方建立通话。</li></ul><p><code>班长坐席条(以厂家大唐高鸿提供的坐席条为例)</code></p><p><img src="http://pa7q376wi.bkt.clouddn.com/gohigh-bzzx.png" alt=""></p><ul><li><strong>强置</strong>：班长坐席，输入强置状态和强置坐席号，然后点击强制状态按钮，对相应的作息状态进行强置，强置的状态包括：0离席，7强置闲，8强置忙。</li><li><strong>监听</strong>：班长坐席，输入监听话路id点击开始监听按钮，班长坐席分机振铃，摘机就可以对话路进行监听。</li><li><strong>停止监听话路</strong>：班长坐席，在监听话路的状态，输入停止监听话路id点击停止监听话路按钮，停止对话路的监听，班长坐席分机挂机。</li><li><strong>强拆</strong>：班长坐席，输入强拆话路id，点击强拆话路，对相应id的坐席的通话进行强拆，被拆坐席的通话断开。</li><li><strong>强插</strong>：班长坐席，输入强插话路id，点击强拆话路，对相应id的坐席的通话进行强插，班长坐席分机振铃，摘机完成了一个三方通话。</li><li><strong>拦截</strong>：班长坐席，输入拦截话路id，点击拦截话路，对相应id的坐席的话路进行拦截，班长坐席分机振铃，摘机后相应id的分机挂机，变成班长与其通话的电话进行通话。</li><li><strong>会议功能</strong><br>1.创建会议：点击创建会按钮，完成创建会议，创建成功后会在状态栏的会议id处显示创建的会议id。<br>2.删除会议：输入删除会议号码，点击删除会议，会议室删除。<br>会议添加人员：输入加入会议号码和加入人员号码，点击会议添加人员按钮，在相应的会议室添加人员。<br>3.会议踢出人员：输入踢出会议号码和踢出人员号码，点击会议踢出人员按钮，会议室中踢出相应的人员。<br>4.会议对人员静音：输入静音会议号码和静音人员号码，点击会议静音按钮，就会对相应的会议室的相应人员进行静音，被静音人员的声音将不被别人听见，但是可以听见会议的声音。<br>5.会议取消对人员静音：输入取消静音会议号码和取消静音人员号码，点击取消会议静音按钮，就会对相应会议室中的相应的被静音人员进行解除静音。</li></ul><blockquote><p><strong>备注</strong>：班长坐席包含了普通座席的全部功能，其实在实际应用中，也是根据客户的需求<code>定制</code>来使用的。</p></blockquote>]]></content>
      
      <categories>
          
          <category> IP语音相关 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 呼叫中心 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
